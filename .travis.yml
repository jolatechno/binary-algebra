language: c++

git:
  quiet: true
  submodules: true

addons:
  apt:
    update: true
    sources:
      - sourceline: 'deb http://apt.llvm.org/bionic/ llvm-toolchain-bionic-10 main'
        key_url: 'https://apt.llvm.org/llvm-snapshot.gpg.key'
      - sourceline: 'ppa:ubuntu-toolchain-r/test'
    packages:
      - clang-10
      - gcc-10
      - g++-10
      - libomp-dev
      - mpic++

script:
  - make clean test
  - make CCFLAGS=-DCPU_LIMIT=0 openmp clean test
  - make mpi clean test
  - make CCFLAGS=-DCPU_LIMIT=0 mpi openmp clean test
